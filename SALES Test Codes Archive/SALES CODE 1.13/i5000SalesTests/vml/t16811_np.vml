/*                                                                            */
/*   File    :  ~/dgn/src/i5000SalesTests/vml/t16811.vml                      */
/*   Purpose :                                                                */
/*       This is a vmc code file for DRIVER PULSE WIDTH MINIMUM               */
/*       This file sets up for a negative minimum pulse with no delay.        */
/*       This file sets the fclks per vector pair to 4 (2 fclks per vector)   */
/*       sets up the driver to drive from -1.5 to +1.5v at 275v/uS slew rate  */
/*       creates an initial drive high vector,                                */
/*       and then commands the driver to toggle.  With the driver set to      */
/*       trigger on the first and second fclks, and the vector set such that  */
/*       the two fclks are one tclk apart, the driver should pulse low for    */
/*       50nS - which is the minimum pulse width.                             */
/*                                                                            */
/*   Compile using vmc                                                        */
/*      -  vmc <options> <directory>/<fnamr>                                  */
/*      -  compiler output goes to <directory>/<fnamr>.out                    */
/*      -  option "-debug 0" outputs a list of download data                  */
/*      -  option "-command" outputs a command list for a dgn source          */
/*      -  option "-makeasm" outputs a panel loadable file                    */
/*                                                                            */

/******************************************************************************/

setup

modules 1
pin_cards 1
fclks_per_vector_pair 4

end setup

/*-----------------------------------------------------------------------------
 * driver <label>
 * mod            0  // 'vmc -command' will be replaced with 'mod_id'
 * slot           2  // 'vmc -command' will be replaced with 'slot'
 * channel        <number>
 * [default]      0|1|k|t|x|z
 * fclks          <number>[(+|-)<delay>] <number[(+|-)<delay>]
 * [data src]     adrv0|adrv1|flip_flop|static0|static1
 * [3-state src]  adrv0|adrv1|flip_flop|static_en|static_dis
 *
 * receiver <label>
 * mod            0  // 'vmc -command' will be replaced with 'mod_id'
 * slot           2  // 'vmc -command' will be replaced with 'slot'
 * channel        <number>
 * [default]      0|1|k|t|x|z
 * fclks          <number>[(+|-)<delay>] <number[(+|-)<delay>]
 * [pull]         pull_up|pull_down
 * [clamp]        clamp_on|clamp_off
 * [rterm]        rterm_on|rterm_off
 *----------------------------------------------------------------------------*/
  
channel_section
  driver_range 0.2 3.5
  slew_rate 225

  driver   d001 mod 0 slot 2 channel 001 z fclks 1 2
  driver   d002 mod 0 slot 2 channel 002 z fclks 1 2
  driver   d003 mod 0 slot 2 channel 003 z fclks 1 2
  driver   d004 mod 0 slot 2 channel 004 z fclks 1 2
  driver   d005 mod 0 slot 2 channel 005 z fclks 1 2
  driver   d006 mod 0 slot 2 channel 006 z fclks 1 2
  driver   d007 mod 0 slot 2 channel 007 z fclks 1 2
  driver   d008 mod 0 slot 2 channel 008 z fclks 1 2
  driver   d009 mod 0 slot 2 channel 009 z fclks 1 2
  driver   d010 mod 0 slot 2 channel 010 z fclks 1 2
  driver   d011 mod 0 slot 2 channel 011 z fclks 1 2
  driver   d012 mod 0 slot 2 channel 012 z fclks 1 2
  driver   d013 mod 0 slot 2 channel 013 z fclks 1 2
  driver   d014 mod 0 slot 2 channel 014 z fclks 1 2
  driver   d015 mod 0 slot 2 channel 015 z fclks 1 2
  driver   d016 mod 0 slot 2 channel 016 z fclks 1 2
  driver   d017 mod 0 slot 2 channel 017 z fclks 1 2
  driver   d018 mod 0 slot 2 channel 018 z fclks 1 2
  driver   d021 mod 0 slot 2 channel 021 z fclks 1 2
  driver   d022 mod 0 slot 2 channel 022 z fclks 1 2
  driver   d023 mod 0 slot 2 channel 023 z fclks 1 2
  driver   d024 mod 0 slot 2 channel 024 z fclks 1 2
  driver   d025 mod 0 slot 2 channel 025 z fclks 1 2
  driver   d026 mod 0 slot 2 channel 026 z fclks 1 2
  driver   d027 mod 0 slot 2 channel 027 z fclks 1 2
  driver   d028 mod 0 slot 2 channel 028 z fclks 1 2
  driver   d029 mod 0 slot 2 channel 029 z fclks 1 2
  driver   d030 mod 0 slot 2 channel 030 z fclks 1 2
  driver   d031 mod 0 slot 2 channel 031 z fclks 1 2
  driver   d032 mod 0 slot 2 channel 032 z fclks 1 2
  driver   d033 mod 0 slot 2 channel 033 z fclks 1 2
  driver   d034 mod 0 slot 2 channel 034 z fclks 1 2
  driver   d035 mod 0 slot 2 channel 035 z fclks 1 2
  driver   d036 mod 0 slot 2 channel 036 z fclks 1 2
  driver   d037 mod 0 slot 2 channel 037 z fclks 1 2
  driver   d038 mod 0 slot 2 channel 038 z fclks 1 2
  driver   d041 mod 0 slot 2 channel 041 z fclks 1 2
  driver   d042 mod 0 slot 2 channel 042 z fclks 1 2
  driver   d043 mod 0 slot 2 channel 043 z fclks 1 2
  driver   d044 mod 0 slot 2 channel 044 z fclks 1 2
  driver   d045 mod 0 slot 2 channel 045 z fclks 1 2
  driver   d046 mod 0 slot 2 channel 046 z fclks 1 2
  driver   d047 mod 0 slot 2 channel 047 z fclks 1 2
  driver   d048 mod 0 slot 2 channel 048 z fclks 1 2
  driver   d049 mod 0 slot 2 channel 049 z fclks 1 2
  driver   d050 mod 0 slot 2 channel 050 z fclks 1 2
  driver   d051 mod 0 slot 2 channel 051 z fclks 1 2
  driver   d052 mod 0 slot 2 channel 052 z fclks 1 2
  driver   d053 mod 0 slot 2 channel 053 z fclks 1 2
  driver   d054 mod 0 slot 2 channel 054 z fclks 1 2
  driver   d055 mod 0 slot 2 channel 055 z fclks 1 2
  driver   d056 mod 0 slot 2 channel 056 z fclks 1 2
  driver   d057 mod 0 slot 2 channel 057 z fclks 1 2
  driver   d058 mod 0 slot 2 channel 058 z fclks 1 2
  driver   d061 mod 0 slot 2 channel 061 z fclks 1 2
  driver   d062 mod 0 slot 2 channel 062 z fclks 1 2
  driver   d063 mod 0 slot 2 channel 063 z fclks 1 2
  driver   d064 mod 0 slot 2 channel 064 z fclks 1 2
  driver   d065 mod 0 slot 2 channel 065 z fclks 1 2
  driver   d066 mod 0 slot 2 channel 066 z fclks 1 2
  driver   d067 mod 0 slot 2 channel 067 z fclks 1 2
  driver   d068 mod 0 slot 2 channel 068 z fclks 1 2
  driver   d069 mod 0 slot 2 channel 069 z fclks 1 2
  driver   d070 mod 0 slot 2 channel 070 z fclks 1 2
  driver   d071 mod 0 slot 2 channel 071 z fclks 1 2
  driver   d072 mod 0 slot 2 channel 072 z fclks 1 2
  driver   d073 mod 0 slot 2 channel 073 z fclks 1 2
  driver   d074 mod 0 slot 2 channel 074 z fclks 1 2
  driver   d075 mod 0 slot 2 channel 075 z fclks 1 2
  driver   d076 mod 0 slot 2 channel 076 z fclks 1 2
  driver   d077 mod 0 slot 2 channel 077 z fclks 1 2
  driver   d078 mod 0 slot 2 channel 078 z fclks 1 2
  driver   d101 mod 0 slot 2 channel 101 z fclks 1 2
  driver   d102 mod 0 slot 2 channel 102 z fclks 1 2
  driver   d103 mod 0 slot 2 channel 103 z fclks 1 2
  driver   d104 mod 0 slot 2 channel 104 z fclks 1 2
  driver   d105 mod 0 slot 2 channel 105 z fclks 1 2
  driver   d106 mod 0 slot 2 channel 106 z fclks 1 2
  driver   d107 mod 0 slot 2 channel 107 z fclks 1 2
  driver   d108 mod 0 slot 2 channel 108 z fclks 1 2
  driver   d109 mod 0 slot 2 channel 109 z fclks 1 2
  driver   d110 mod 0 slot 2 channel 110 z fclks 1 2
  driver   d111 mod 0 slot 2 channel 111 z fclks 1 2
  driver   d112 mod 0 slot 2 channel 112 z fclks 1 2
  driver   d113 mod 0 slot 2 channel 113 z fclks 1 2
  driver   d114 mod 0 slot 2 channel 114 z fclks 1 2
  driver   d115 mod 0 slot 2 channel 115 z fclks 1 2
  driver   d116 mod 0 slot 2 channel 116 z fclks 1 2
  driver   d117 mod 0 slot 2 channel 117 z fclks 1 2
  driver   d118 mod 0 slot 2 channel 118 z fclks 1 2
  driver   d121 mod 0 slot 2 channel 121 z fclks 1 2
  driver   d122 mod 0 slot 2 channel 122 z fclks 1 2
  driver   d123 mod 0 slot 2 channel 123 z fclks 1 2
  driver   d124 mod 0 slot 2 channel 124 z fclks 1 2
  driver   d125 mod 0 slot 2 channel 125 z fclks 1 2
  driver   d126 mod 0 slot 2 channel 126 z fclks 1 2
  driver   d127 mod 0 slot 2 channel 127 z fclks 1 2
  driver   d128 mod 0 slot 2 channel 128 z fclks 1 2
  driver   d129 mod 0 slot 2 channel 129 z fclks 1 2
  driver   d130 mod 0 slot 2 channel 130 z fclks 1 2
  driver   d131 mod 0 slot 2 channel 131 z fclks 1 2
  driver   d132 mod 0 slot 2 channel 132 z fclks 1 2
  driver   d133 mod 0 slot 2 channel 133 z fclks 1 2
  driver   d134 mod 0 slot 2 channel 134 z fclks 1 2
  driver   d135 mod 0 slot 2 channel 135 z fclks 1 2
  driver   d136 mod 0 slot 2 channel 136 z fclks 1 2
  driver   d137 mod 0 slot 2 channel 137 z fclks 1 2
  driver   d138 mod 0 slot 2 channel 138 z fclks 1 2
  driver   d141 mod 0 slot 2 channel 141 z fclks 1 2
  driver   d142 mod 0 slot 2 channel 142 z fclks 1 2
  driver   d143 mod 0 slot 2 channel 143 z fclks 1 2
  driver   d144 mod 0 slot 2 channel 144 z fclks 1 2
  driver   d145 mod 0 slot 2 channel 145 z fclks 1 2
  driver   d146 mod 0 slot 2 channel 146 z fclks 1 2
  driver   d147 mod 0 slot 2 channel 147 z fclks 1 2
  driver   d148 mod 0 slot 2 channel 148 z fclks 1 2
  driver   d149 mod 0 slot 2 channel 149 z fclks 1 2
  driver   d150 mod 0 slot 2 channel 150 z fclks 1 2
  driver   d151 mod 0 slot 2 channel 151 z fclks 1 2
  driver   d152 mod 0 slot 2 channel 152 z fclks 1 2
  driver   d153 mod 0 slot 2 channel 153 z fclks 1 2
  driver   d154 mod 0 slot 2 channel 154 z fclks 1 2
  driver   d155 mod 0 slot 2 channel 155 z fclks 1 2
  driver   d156 mod 0 slot 2 channel 156 z fclks 1 2
  driver   d157 mod 0 slot 2 channel 157 z fclks 1 2
  driver   d158 mod 0 slot 2 channel 158 z fclks 1 2
  driver   d161 mod 0 slot 2 channel 161 z fclks 1 2
  driver   d162 mod 0 slot 2 channel 162 z fclks 1 2
  driver   d163 mod 0 slot 2 channel 163 z fclks 1 2
  driver   d164 mod 0 slot 2 channel 164 z fclks 1 2
  driver   d165 mod 0 slot 2 channel 165 z fclks 1 2
  driver   d166 mod 0 slot 2 channel 166 z fclks 1 2
  driver   d167 mod 0 slot 2 channel 167 z fclks 1 2
  driver   d168 mod 0 slot 2 channel 168 z fclks 1 2
  driver   d169 mod 0 slot 2 channel 169 z fclks 1 2
  driver   d170 mod 0 slot 2 channel 170 z fclks 1 2
  driver   d171 mod 0 slot 2 channel 171 z fclks 1 2
  driver   d172 mod 0 slot 2 channel 172 z fclks 1 2
  driver   d173 mod 0 slot 2 channel 173 z fclks 1 2
  driver   d174 mod 0 slot 2 channel 174 z fclks 1 2
  driver   d175 mod 0 slot 2 channel 175 z fclks 1 2
  driver   d176 mod 0 slot 2 channel 176 z fclks 1 2
  driver   d177 mod 0 slot 2 channel 177 z fclks 1 2
  driver   d178 mod 0 slot 2 channel 178 z fclks 1 2
  end channel_section

/******************************************************************************/

vector_section

   /*   vector <label> <vector length in tclks> <1st fclk> <2nd fclk>    */
   /*   vector addresses 0 through F are reserved     */
   /*   for seq, sys clk gen, and formatter startup   */

   org 0

   vector   v_slip_clk            2   256   256
   end vector

   vector   v_flush               2     0     1
   end vector

   /*   begin real vectors at address 10H   */

   org 16 

  vector drive_high 3 0 1
    d001 1  d002 1  d003 1  d004 1  d005 1  d006 1  d007 1  d008 1  d009 1
    d010 1  d011 1  d012 1  d013 1  d014 1  d015 1  d016 1  d017 1  d018 1
    d021 1  d022 1  d023 1  d024 1  d025 1  d026 1  d027 1  d028 1  d029 1
    d030 1  d031 1  d032 1  d033 1  d034 1  d035 1  d036 1  d037 1  d038 1
    d041 1  d042 1  d043 1  d044 1  d045 1  d046 1  d047 1  d048 1  d049 1
    d050 1  d051 1  d052 1  d053 1  d054 1  d055 1  d056 1  d057 1  d058 1
    d061 1  d062 1  d063 1  d064 1  d065 1  d066 1  d067 1  d068 1  d069 1
    d070 1  d071 1  d072 1  d073 1  d074 1  d075 1  d076 1  d077 1  d078 1
    d101 1  d102 1  d103 1  d104 1  d105 1  d106 1  d107 1  d108 1  d109 1
    d110 1  d111 1  d112 1  d113 1  d114 1  d115 1  d116 1  d117 1  d118 1
    d121 1  d122 1  d123 1  d124 1  d125 1  d126 1  d127 1  d128 1  d129 1
    d130 1  d131 1  d132 1  d133 1  d134 1  d135 1  d136 1  d137 1  d138 1
    d141 1  d142 1  d143 1  d144 1  d145 1  d146 1  d147 1  d148 1  d149 1
    d150 1  d151 1  d152 1  d153 1  d154 1  d155 1  d156 1  d157 1  d158 1
    d161 1  d162 1  d163 1  d164 1  d165 1  d166 1  d167 1  d168 1  d169 1
    d170 1  d171 1  d172 1  d173 1  d174 1  d175 1  d176 1  d177 1  d178 1
  end vector

  vector toggle 3 0 1
    d001 t  d002 t  d003 t  d004 t  d005 t  d006 t  d007 t  d008 t  d009 t
    d010 t  d011 t  d012 t  d013 t  d014 t  d015 t  d016 t  d017 t  d018 t
    d021 t  d022 t  d023 t  d024 t  d025 t  d026 t  d027 t  d028 t  d029 t
    d030 t  d031 t  d032 t  d033 t  d034 t  d035 t  d036 t  d037 t  d038 t
    d041 t  d042 t  d043 t  d044 t  d045 t  d046 t  d047 t  d048 t  d049 t
    d050 t  d051 t  d052 t  d053 t  d054 t  d055 t  d056 t  d057 t  d058 t
    d061 t  d062 t  d063 t  d064 t  d065 t  d066 t  d067 t  d068 t  d069 t
    d070 t  d071 t  d072 t  d073 t  d074 t  d075 t  d076 t  d077 t  d078 t
    d101 t  d102 t  d103 t  d104 t  d105 t  d106 t  d107 t  d108 t  d109 t
    d110 t  d111 t  d112 t  d113 t  d114 t  d115 t  d116 t  d117 t  d118 t
    d121 t  d122 t  d123 t  d124 t  d125 t  d126 t  d127 t  d128 t  d129 t
    d130 t  d131 t  d132 t  d133 t  d134 t  d135 t  d136 t  d137 t  d138 t
    d141 t  d142 t  d143 t  d144 t  d145 t  d146 t  d147 t  d148 t  d149 t
    d150 t  d151 t  d152 t  d153 t  d154 t  d155 t  d156 t  d157 t  d158 t
    d161 t  d162 t  d163 t  d164 t  d165 t  d166 t  d167 t  d168 t  d169 t
    d170 t  d171 t  d172 t  d173 t  d174 t  d175 t  d176 t  d177 t  d178 t
 end vector

end vector_section

/******************************************************************************/

sequence_section
   
   /*   <seq_label> <vect_label> [crc, sync]   */
   
   /*   sequence ram pointers 0 through F are reserved   */
   /*   for seq, sys clk gen, and formatter startup      */

   org 0

  s_flush    	v_flush
  s_flush_0001 	v_flush
  s_flush_0002 	v_flush
  s_flush_0003 	v_flush
  s_flush_0004 	v_flush
  s_flush_0005 	v_flush
  s_flush_0006 	v_flush
  s_flush_0007 	v_flush
  s_flush_0008 	v_flush
  s_flush_0009 	v_flush
  s_flush_000A 	v_flush
  s_flush_000B 	v_flush
  s_flush_000C 	v_flush
  s_flush_000D 	v_flush
  s_flush_000E 	v_flush
  s_flush_000F 	v_flush

   /*   begin real pointers at address 10H   */

   org 16 
   
  sequence_drive_high	drive_high
  sequence_toggle		toggle

end sequence_section

/******************************************************************************/

program_section

   /*   directory ram pointers 0 through F are reserved   */
   /*   for seq, sys clk gen, and formatter startup       */

   org 0

   /*   this section is the startup for the 2 fclk per vector mode   */
   /*   this section is the startup for the 3 fclk per vector mode   */
   /*   this section is the startup for the 4 fclk per vector mode   */

   p_startup_0								apply s_flush with vceoff, nop
   p_startup_1								apply s_flush with nop
   p_startup_2								apply s_flush with nop
   p_startup_3 jmp to program_drive_high,	apply s_flush with nop

   /* start real program at address 10H */

   org 16 
   
   program_drive_high							apply sequence_drive_high with vceon
   program_toggle jmpq cpu to program_toggle,	apply sequence_toggle
  
   /* end   real program   */
  
   p_off						apply s_flush	with vceoff
   p_halt_flush_sls   sls 13    apply s_flush   with nop
   p_halt_assert                apply s_flush   with vceoff, nop, halt
   p_halt_dis_vcen              apply s_flush   with nop
   p_halt_flush                 apply s_flush   with nop
end program_section
